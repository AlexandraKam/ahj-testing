(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var i=s.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();class t{constructor(){this.list=null}static get list(){return{"American Express":"34,37","Diners Club International":"30,36,38","Discover Card":"60",JCB:"31,35",MIR:"22",Mastercard:"51,52,53,54,55",Visa:"40,41,42,43,44,45,46,47,48,49","Visa Electron":"4026,417500,4508,4844,4913,4917"}}}const s=new class{constructor(){this.paySystem=document.querySelector(".pay_system"),this.message=document.querySelector(".message"),this.cardNumber=document.querySelector("[name=card_number]"),this.widget=document.querySelector(".widget"),this.form=document.querySelector(".check_form form")}drawUi(){this.cardNumber.value=""}drawCardImages(e){e.forEach((e=>{const t=document.createElement("img");t.src=`./assets/${e.toLowerCase().replaceAll(" ","")}.gif`,t.classList.add("opacity_img"),t.classList.add("head_img"),t.id=`${e.toLowerCase().replaceAll(" ","")}`,this.paySystem.appendChild(t)}))}getCardNumber(){return this.cardNumber.value.split(" ").join("")}showMessage(e){this.message.innerHTML=`${e}`}showPaySystem(e){const t=`${e.toLowerCase().replaceAll(" ","")}`;document.getElementById(t).classList.remove("opacity_img")}clear(){this.message.innerHTML="",this.message.className="message",[...this.paySystem.children].forEach(((e,t)=>{this.paySystem.children[t].classList.add("opacity_img")}))}},i=new class{constructor(e){this.gui=e,this.paySystemsList=null}init(){this.gui.drawUi(),this.fetchPaySystems(),this.gui.form.addEventListener("submit",(e=>{this.gui.clear(),this.checkNumber(e),this.identifyPaySystem(e)}))}checkNumber(e){e.preventDefault();const t=this.gui.getCardNumber().replaceAll(",","");if(`${t}`.length<8)return this.gui.showMessage("Minimum 8 digits"),void this.gui.message.classList.add("invalid");const s=function(e){const t=e.replace(/\D/g,"");let s=0,i=!1;for(let e=t.length-1;e>=0;e-=1){let r=parseInt(t[e],10);i&&(r*=2)>9&&(r-=9),i=!i,s+=r}return s%10}(t);let i;i=0===s?{message:"card is valid",class:"valid"}:{message:"card isnt valid",class:"invalid"},this.gui.message.classList.add(i.class),this.gui.showMessage(i.message)}identifyPaySystem(e){e.preventDefault();const s=this.gui.getCardNumber(),i=function(e,t){const s=t.replace(/\s/g,"");let i;for(const t in e)if(Object.hasOwnProperty.call(e,t)){const r=e[t].split(",");for(const e of r)s.slice(0,e.length)===e&&(i=t)}return i}(t.list,s);i&&this.gui.showPaySystem(i)}fetchPaySystems(){const e=function(e){const t=[];for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t}(t.list);this.gui.drawCardImages(e)}}(s);i.init();e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p})();